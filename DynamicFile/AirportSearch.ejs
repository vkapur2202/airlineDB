<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.2/css/bootstrap.min.css" integrity="sha384-y3tfxAZXuh4HwSYylfB+J125MxIs6mR5FOHamPBG064zB+AFeWH94NdvaCBm8qnd" crossorigin="anonymous">
</head>
<body class = "gradient-custom" align = "center">
<div class = "main-container">
    <nav class="navbar navbar-inverse">
        <div class="container-fluid">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#myNavbar">
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a href="/" class="pull-left"><img src="../Images/logo_resized.png"></a>
            </div>
            <div class="collapse navbar-collapse" id="myNavbar">
                <ul class="nav navbar-nav">
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" id="navbardrop" data-toggle="dropdown" style="padding-top: 1em;">
                            Flights
                        </a>
                        <div class="dropdown-menu">
                            <a class="dropdown-item" href="./searchflights">Search Flights</a>
                            <a class="dropdown-item" href="./createflight">Register Flight</a>
                        </div>
                    </li>
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" id="navbardrop" data-toggle="dropdown" style="padding-top: 1em;">
                            Customers
                        </a>
                        <div class="dropdown-menu">
                            <a class="dropdown-item" href="./addcustomer">Register New Customer</a>
                            <a class="dropdown-item" href="./addcustomeronflight">Add Customer to Flight</a>
                        </div>
                    </li>
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" id="navbardrop" data-toggle="dropdown" style="padding-top: 1em;">
                            Pilots
                        </a>
                        <div class="dropdown-menu">
                            <a class="dropdown-item" href="./addpilot">Register Pilot</a>
                        </div>
                    </li>
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" id="navbardrop" data-toggle="dropdown" style="padding-top: 1em;">
                            Airports
                        </a>
                        <div class="dropdown-menu">
                            <a class="dropdown-item" href="./searchairports">Search Airports</a>
                            <a class="dropdown-item" href="./addairport">Register Airport</a>
                        </div>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <div style = "height: 3em;"></div>
    <div class = "row">
        <div class = "col-lg-12" style="color: whitesmoke;">
            <h1>Search for your Airport</h1>
        </div>
    </div>
    <div style = "height: 2em;"></div>
    <div class = "row" >
        <div class = "col" align="center">
            <form class="form-inline">
                <div class="form-group mr-2">
                    <label class="sr-only">Airport Name</label>
                    <input type="text" class="form-control" id="nameAInput" placeholder="Airport Name">
                </div>
                <div class="form-group mr-2">
                    <label class="sr-only">Airport City</label>
                    <input type="text" class="form-control" id="cityAInput" placeholder="Airport City">
                </div>
                <div class="form-group mr-2">
                    <label class="sr-only">Airport Country</label>
                    <input type="text" class="form-control" id="countryAInput" placeholder="Airport Country">
                </div>
                <button onclick = "return searchAirports()" class="btn btn-primary">Search</button>
            </form>
        </div>
    </div>
    <div style = "height: 5em;"></div>
    <div class = "row" >
            <div class = "col-lg-1">
            </div>
            <div class = "col-lg-10 options-overlay" style = "height: 4rem;">
                <div class = "col-md-2" style = "color: whitesmoke; padding-top: 1.5em;"></div>
                <div class = "col-md-2" style = "color: whitesmoke; padding-top: 1.5em;">
                    <h6>Airport Number</h6>
                </div>
                <div class = "col-md-2" style = "color: whitesmoke; padding-top: 1.5em;">
                    <h6>Airport Name</h6>
                </div>
                <div class = "col-md-2" style = "color: whitesmoke; padding-top: 1.5em;">
                    <h6>Airport City</h6>
                </div>
                <div class = "col-md-2" style = "color: whitesmoke; padding-top: 1.5em;">
                    <h6>Airport Country</h6>
                </div>
                <div class = "col-md-2" style = "color: whitesmoke; padding-top: 1.5em;"></div>
            </div>
            <div class = "col-lg-1">
            </div>
    </div>
    <%data.forEach(function(airport) {%>
        <div class = "row" >
            <div class = "col-lg-1">
            </div>
            <div class = "col-lg-10 options-mini-1">
                    <div class = "col-md-2" style = "color: whitesmoke; padding-top: 1.5em;"></div>
                    <div class = "col-md-2" style = "color: whitesmoke; padding-top: 0.5em;">
                        <p><%= airport.aid %></p>
                    </div>
                    <div class = "col-md-2" style = "color: whitesmoke; padding-top: 0.5em;">
                        <p><%= airport.aname %></p>
                    </div>
                
                    <div class = "col-md-2" style = "color: whitesmoke; padding-top: 0.5em;">
                        <p><%= airport.city %></p>
                    </div>
                    
                    <div class = "col-md-2" style = "color: whitesmoke; padding-top: 0.5em;">
                        <p><%= airport.country %></p>
                    </div>
                    
                    <div class = "col-md-2" style = "color: whitesmoke; padding-top: 1.5em;"></div>
                </a>
            </div>
            <div class = "col-lg-1">
            </div>
        </div>
        <% }); %>
    <footer class="footer" id = "footer">
            <div class="container">
                <span class="text-muted" style="color: darkgray;">Couldn't find the airport you were looking for? Register an airport <a href="/addairport" style="color: whitesmoke;">here</a></span>
            </div>
        </footer>
</div>
</body>
</html>
<script>
    function searchAirports() {

        // Form fields, see IDs above
        const params = {
            name: document.querySelector('#nameAInput').value,
            city: document.querySelector('#cityAInput').value,
            country: document.querySelector('#countryAInput').value
        }

        const http = new XMLHttpRequest()
        http.open('POST', '/searchairports/search')
        http.setRequestHeader('Content-type', 'application/json')
        http.send(JSON.stringify(params)) // Make sure to stringify
        http.onload = function() {
            // Do whatever with response
            document.write(http.responseText)
        }
    }
</script>
<style>
    .gradient-custom {
        /* fallback for old browsers */
        background: #314c8c;

        /* Chrome 10-25, Safari 5.1-6 */
        background: -webkit-linear-gradient(to right, rgba(49, 76, 140, 1), rgba(74, 123, 161, 1));

        /* W3C, IE 10+/ Edge, Firefox 16+, Chrome 26+, Opera 12+, Safari 7+ */
        background: linear-gradient(to right, rgba(49, 76, 140, 1), rgba(74, 123, 161, 1));
    }
    .options-overlay {
        /* fallback for old browsers */
        /*background: rgba(49, 76, 140, 0.73);*/
        background: rgba(37, 57, 104, 0.90);
    }
    .options-mini-2 {
        /* fallback for old browsers */
        background: rgba(37, 57, 104, 0.90);
        /*background: rgba(37, 57, 104, 0.73);*/
        height: 2.5rem;
    }

    .options-mini-1{
        background: rgba(49, 76, 140, 0.73);
        height: 2.5rem;
    }

    .options-mini-2:hover{
        background: rgba(30, 46, 83, 0.9);
    }

    #footer {
        position:absolute;
        bottom:0;
        width:100%;
        height:2em;
        background: #101010; }

    * {
        box-sizing: border-box;
    }
    *:before,
    *:after {
        box-sizing: border-box;
    }
    html,
    body {
        height: 100%;
        position: relative;
    }
    .main-container {
        min-height: 100vh; /* will cover the 100% of viewport */
        overflow: hidden;
        display: block;
        position: relative;
        padding-bottom: 100px; /* height of your footer */
    }
</style>